<div class="container ">

  <!-- Card -->
  <!-- <div class="card col-auto p-0 rounded-3 bg-dark text-white"> -->

  <app-spinner></app-spinner>

  <!-- Body -->
  <!-- <div class="card-body p-3 ">
      <h4 class="card-title text-center mb-4">Registrar</h4> -->
  <app-page title="Editar perfil" class="row">

    <div class="card">

      <div class="card-header container-fluid">
        <figure class="icontext">
          <div class="icon">
            <img class="rounded-circle img-sm border" src="{{item?.avatar}}">
          </div>
          <div class="text">
            <strong> {{item?.nick}} </strong> <br>
          </div>
        </figure>
      </div>


      <form class="card-body" [formGroup]="user" (ngSubmit)="set(user.value)">

        <div class="row">
          <!-- Name -->
          <div class="col-6 form-group mb-3 form-floating">
            <input class="form-control text-center" type="text" formControlName="name"
              [ngClass]="{ 'is-invalid': form['name'].errors&&form['name'].dirty}">
            <label>Nombre</label>
            <div *ngIf="form['name'].errors" class="invalid-tooltip">
              <div *ngIf="form['name'].errors['required']">Nombre requerido</div>
              <div *ngIf="form['name'].errors['name']">Nombre no valido</div>
            </div>
          </div>

          <!-- Surname -->
          <div class="col-6 form-group mb-3 form-floating">
            <input class="form-control text-center" type="text" formControlName="surnames"
              [ngClass]="{ 'is-invalid': form['surnames'].errors&&form['surnames'].dirty}">
            <label>Apellidos</label>
            <div *ngIf="form['surnames'].errors" class="invalid-tooltip">
              <div *ngIf="form['surnames'].errors['required']">Apellidos requerido</div>
              <div *ngIf="form['surnames'].errors['surnames']">Apellidos no valido</div>
            </div>
          </div>
        </div>

        <!-- Email -->
        <div class="form-group mb-3 form-floating">
          <input class="form-control text-center" type="email" formControlName="email"
            [ngClass]="{ 'is-invalid': form['email'].errors&&form['email'].dirty}">
          <label>Email</label>
          <div *ngIf="form['email'].errors" class="invalid-tooltip">
            <div *ngIf="form['email'].errors['required']">email requerido</div>
            <div *ngIf="form['email'].errors['email']">email no valido</div>
          </div>
        </div>

        <div class="row">

          <!-- Nueva contraseña -->
          <div class="col-6 form-group mb-3 form-floating">
            <input class="form-control text-center"  type="password" formControlName="new_password"
              [ngClass]="{ 'is-invalid': form['new_password'].errors&&form['new_password'].dirty}">
            <label>Nueva contraseña</label>
            <div *ngIf="form['new_password'].errors" class="invalid-tooltip">
              <div *ngIf="form['new_password'].errors['minlength']">La contraseña es de minimo
                {{form['new_password'].errors['minlength'].requiredLength}} caracteres</div>
            </div>
          </div>

          <!-- Confirmar contraseña -->
          <div class="col-6 form-group mb-3 form-floating">
            <input class="form-control text-center"  type="password"
              formControlName="new_password_confirmation"
              [ngClass]="{ 'is-invalid': form['new_password_confirmation'].errors&&form['new_password_confirmation'].dirty}">
            <label>Confirmar Contraseña</label>
            <div *ngIf="form['new_password_confirmation'].errors" class="invalid-tooltip">
            </div>
          </div>
        </div>


        <!-- Avatar -->

          <div class="form-group mb-3 row ">
            <label class="col-sm-2 col-form-label">Avatar </label>
            <div class="col-sm-10">
              <input class="form-control " type="file" (change)="seleccionarArchivo($event)" accept="image/*"
                formControlName="avatar" [ngClass]="{ 'is-invalid': form['avatar'].errors&&form['avatar'].dirty}">
              <div *ngIf="form['avatar'].errors" class="invalid-tooltip">
              </div>
            </div>
          </div>



        <div class="row">

          <!-- Contraseña -->
          <div class="col-6 form-group mb-3 form-floating">
            <input class="form-control text-center"  type="password" formControlName="password"
              [ngClass]="{ 'is-invalid': form['password'].errors&&form['password'].dirty}">
            <label>Contraseña</label>
            <div *ngIf="form['password'].errors" class="invalid-tooltip">
              <div *ngIf="form['password'].errors['required']">Contraseña requerida</div>
            </div>
          </div>

          <!-- Submit -->
          <div class="form-group col-6 mb-3 d-grid gap-2">
            <button type="submit" [disabled]="user.invalid" class="btn btn-primary py-3"> Guardar </button>
          </div>
        </div>
      </form>
    </div>
    <!-- </div> -->
  </app-page>
</div>
